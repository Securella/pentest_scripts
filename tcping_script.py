from tcping import Ping
import socket


def validate_ip(ip):
    try:
        socket.inet_pton(socket.AF_INET, ip)
        return True
    except socket.error:
        return False


def perform_tcp_ping(ip, port):
    try:
        ping = Ping(ip, port)
        result = ping.ping()
        if result:
            print(f"TCP ping to {ip}:{port} successful.")
        else:
            print(f"TCP ping to {ip}:{port} failed.")
    except Exception as e:
        print(f"Error during TCP ping: {e}")


if __name__ == "__main__":
    # Input validation for IP address
    server_ip_address = input("Enter the server IP address: ").strip()
    if not validate_ip(server_ip_address):
        print("Invalid IP address. Exiting.")
        exit(1)

    # Input validation for port number
    try:
        target_port = int(input("Enter the target port to ping: "))
        if not (0 < target_port <= 65535):
            print("Invalid port number. Exiting.")
            exit(1)
    except ValueError:
        print("Invalid port number. Exiting.")
        exit(1)

    # Perform TCP ping to the specified port
    perform_tcp_ping(server_ip_address, target_port)
