import os
import sys
import requests

# This script reads a wordlist file specified as the first argument
# (sys.argv[1]) and constructs URLs by appending each subdomain
# from the wordlist to the domain specified as the second argument
#  (sys.argv[2]).
# It then attempts to make a GET request to each URL and prints 
# the valid domains if the request is successful.


def main():
    # Check if the correct number of arguments are provided
    if len(sys.argv) != 3:
        print("Usage: python3 subdomain_enumeration.py <path_to_wordlist> <domain>")
        return

    # Construct the full path to the wordlist file
    file_path = os.path.join(os.getcwd(), sys.argv[1])

    # Read the wordlist file
    with open(file_path) as file:
        subdoms = file.read().splitlines()

    # Iterate through each subdomain
    for sub in subdoms:
        sub_domain = f"http://{sub}.{sys.argv[2]}"
        try:
            # Attempt to make a request to the subdomain
            response = requests.get(sub_domain)

            # Check if the response status code indicates success (2xx)
            if response.ok:
                print("Valid domain:", sub_domain)

        except requests.ConnectionError:
            pass


if __name__ == "__main__":
    main()
